<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>A GraphQL Primer</title>

		<meta name="description" content="A description and examples of the GraphQL specification">
		<meta name="author" content="Ben Kimball">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/simple.css" id="theme">

		<link rel="stylesheet" href="lib/css/prism.css">
		<link rel="stylesheet" href="css/overrides.css">

		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>

	<body>
		<div class="reveal">
			<div class="slides language-graphql">
				<section>
					<h1>GraphQL</h1>
					<h3 class="fragment">A primer</h3>
				</section>

				<section>
					<h2 class="fragment">Meta</h2>

					<p class="fragment">My goal is to explain and demonstrate the GraphQL specification</p>

					<p class="fragment">It should last about 20 minutes, leaving us 10 minutes for discussion</p>

					<p class="fragment">These slides are <a href="https://github.com/benkimball/graphql-primer">available online</a></p>
				</section>

				<section>
					<h3>What is GraphQL?</h3>

					<p class="fragment">GraphQL is a <a href="http://facebook.github.io/graphql/October2016/">specification</a> for a query language for APIs.</p>

					<p class="fragment">It is an <em>alternative</em> to REST.</p>

					<aside class="notes">
						GraphQL was originally developed internally at Facebook and has been in use on their production systems for several years. In 2015 Facebook made the specification open source, and since then a number of companies have been participating in the community by creating developer tools and APIs.
					</aside>
				</section>

				<section>
					<h3>Who uses GraphQL?</h3>

					<div class="fragment">
						<p>GraphQL is in use by many notable companies, including</p>
						<div class="logos">
							<img width="100" height="100" src="/img/facebook.png" title="Facebook">
							<img width="100" height="100" src="/img/github.png" title="GitHub" class="invert">
							<img width="100" height="100" src="/img/pinterest.png" title="Pinterest">
							<img width="100" height="100" src="/img/nyt.png" title="The New York Times" class="invert">
							<img width="100" height="100" src="/img/shopify.png" title="Shopify">
							<img width="100" height="100" src="/img/twitter.png" title="Twitter">
						</div>
					</div>

          <p class="fragment">(if you care)</p>
					<aside class="notes">
						GitHub in particular has provided a <a href="https://githubengineering.com/the-github-graphql-api/">good writeup</a> of why they moved from their very popular REST API to GraphQL, which is available on their engineering blog.
					</aside>
				</section>

				<section>
					<h1>Why GraphQL?</h1>
				</section>

				<section>
					<h3>Brevity</h3>
					<p class="fragment">We can request only those fields we will use</p>

          <div class="request-response">
            <pre class="fragment" data-src="code/user_query.graphql"></pre>
            <pre class="fragment" data-src="code/user_response.graphql"></pre>
          </div>

					<aside class="notes">
						Here we are requesting a specific user, and telling the server that the only two fields on the user that we care about are first and last name. Accordingly, that's all the server needs to include in its response.
					</aside>
				</section>

				<section>
					<h3>Predictability</h3>
					<p class="fragment">The response format matches the the query</p>

          <div class="request-response">
            <pre class="fragment" data-src="code/nomination_query.graphql"></pre>
            <pre class="fragment" data-src="code/nomination_response.graphql"></pre>
          </div>

					<aside class="notes">
						Sticking with the same query, notice that the returned data structure matches the structure of the query: we're getting the email addresses for each nominee for the award. This pattern holds in general and is extended down through any nested object.
					</aside>
				</section>

				<section>
					<h3>Efficiency</h3>
					<p class="fragment">We can get more than one thing at a time</p>

          <div class="request-response">
            <pre class="fragment" data-src="code/multiple_query.graphql"></pre>
            <pre class="fragment" data-src="code/multiple_response.graphql"></pre>
          </div>

					<aside class="notes">
						The nesting of objects allows us to fetch relationships in a single query. Where a REST API might require us to fetch an Award resource, and then fetch all of its Nominee resources, this query shows how to reach through the nominees relationship to get at the data we need in a single call.
					</aside>
				</section>

				<section>
					<h3>Discoverability</h3>
					<p class="fragment">We can ask a GraphQL schema <a href="https://developer.github.com/v4/explorer/" target="_blank">about itself</a></p>

					<aside class="notes">
						This is a publically-available web app that you can use to run GraphQL queries against GitHub's GraphQL API. Let's open the Docs pane. Here you can see that the schema supports query and mutation types. Let's see what kind of queries they support. There are quite a few! Let's explore Licenses. We can see that there is a license field that takes a key. We'll try "MIT." Cool. Now suppose we didn't know what license keys exist. But we see there is a licenses field, and we can introspect to find keys. What else can we learn about licenses? Let's look at limitations. Notice that the editor automatically filled in some fields for us! All of this can happen because the schema can be introspected, allowing the tool to give us things like searchable documentation, auto-complete, and query validation.
					</aside>
				</section>

				<section class="smaller-code">
					<h3>Constancy</h3>
					<p class="fragment">We can stop versioning our API</p>

          <div class="request-response">
            <pre class="fragment" data-src="code/evolution1.graphql"></pre>
            <pre class="fragment" data-src="code/evolution2.graphql"></pre>
          </div>

          <div class="request-response">
            <pre class="fragment" data-src="code/evolution3.graphql"></pre>
            <pre class="fragment" data-src="code/evolution4.graphql"></pre>
          </div>

          <aside class="notes">
						<p>GraphQL takes a strong opinion on avoiding versioning by providing the tools for the continuous evolution of a GraphQL schema.</p>

						<p>Most APIs version because when there's limited control over the data that's returned from an API endpoint, any change can be considered a breaking change, and breaking changes require a new version. If adding new features to an API requires a new version, then a tradeoff emerges between releasing often and having many incremental versions versus the understandability and maintainability of the API.</p>

						<p>In contrast, GraphQL only returns the data that's explicitly requested, so new capabilities can be added via new types and new fields on those types without creating a breaking change. This has lead to a common practice of always avoiding breaking changes and serving a versionless API.</p>
					</aside>
				</section>

        <section><h1>Tools</h1></section>
				<section>Tools: graphql-ruby</section>
				<section>Tools: apollo (JS, Swift/iOS, Java/Android)</section>
				<section>Tools: graphiql</section>

				<section>
          <h1>The End</h1>
				</section>
			</div>
		</div>

		<script src="lib/js/prism.js"></script>
		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/search/search.js', async: true },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});
		</script>
	</body>
</html>
